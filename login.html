<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ÄÄƒng nháº­p | SÄ© Triáº¿t Digital</title>
    <link rel="stylesheet" href="./public/assets/css/login.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto+Mono&family=Montserrat:wght@600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="login-container">
      <div class="login-box fade-in">
        <h1 class="login-title" id="form-title">ÄÄƒng Nháº­p</h1>

        <form id="loginForm" class="login-form">
          <div class="input-group">
            <label for="username">TÃªn Ä‘Äƒng nháº­p</label>
            <input
              type="text"
              id="username"
              placeholder="Nháº­p tÃªn Ä‘Äƒng nháº­p"
              required
            />
          </div>

          <div class="input-group">
            <label for="password">Máº­t kháº©u</label>
            <input
              type="password"
              id="password"
              placeholder="Nháº­p máº­t kháº©u"
              required
            />
          </div>

          <button type="submit" class="btn-login">ÄÄƒng Nháº­p</button>

          <p class="switch-form">
            ChÆ°a cÃ³ tÃ i khoáº£n?
            <a href="#" id="showRegister">ÄÄƒng kÃ½ ngay</a>
          </p>

          <div class="extra-links">
            <a href="index.html">â† Quay láº¡i Trang chá»§</a>
          </div>
        </form>

        <!-- Form ÄÄƒng kÃ½ -->
        <form id="registerForm" class="login-form hidden">
          <div class="input-group">
            <label for="regUsername">TÃªn Ä‘Äƒng nháº­p</label>
            <input
              type="text"
              id="regUsername"
              placeholder="Táº¡o tÃªn Ä‘Äƒng nháº­p"
              required
            />
          </div>

          <div class="input-group">
            <label for="regPassword">Máº­t kháº©u</label>
            <input
              type="password"
              id="regPassword"
              placeholder="Táº¡o máº­t kháº©u"
              required
            />
          </div>

          <button type="submit" class="btn-login">ÄÄƒng KÃ½</button>

          <p class="switch-form">
            ÄÃ£ cÃ³ tÃ i khoáº£n?
            <a href="#" id="showLogin">ÄÄƒng nháº­p</a>
          </p>
        </form>
      </div>
    </div>

    <script>
      // === Xá»­ lÃ½ chuyá»ƒn Ä‘á»•i Login / Register ===
      const loginForm = document.getElementById("loginForm");
      const registerForm = document.getElementById("registerForm");
      const formTitle = document.getElementById("form-title");
      const showRegister = document.getElementById("showRegister");
      const showLogin = document.getElementById("showLogin");

      showRegister.addEventListener("click", (e) => {
        e.preventDefault();
        loginForm.classList.add("hidden");
        registerForm.classList.remove("hidden");
        formTitle.textContent = "ÄÄƒng KÃ½";
      });

      showLogin.addEventListener("click", (e) => {
        e.preventDefault();
        registerForm.classList.add("hidden");
        loginForm.classList.remove("hidden");
        formTitle.textContent = "ÄÄƒng Nháº­p";
      });

      // === Xá»­ lÃ½ ÄÄƒng kÃ½ ===
      registerForm.addEventListener("submit", (e) => {
        e.preventDefault();
        const username = document.getElementById("regUsername").value.trim();
        const password = document.getElementById("regPassword").value.trim();

        if (localStorage.getItem(username)) {
          alert("âŒ TÃªn Ä‘Äƒng nháº­p Ä‘Ã£ tá»“n táº¡i!");
          return;
        }

        localStorage.setItem(username, password);
        alert("âœ… ÄÄƒng kÃ½ thÃ nh cÃ´ng! Vui lÃ²ng Ä‘Äƒng nháº­p láº¡i.");
        registerForm.reset();
        showLogin.click(); // Chuyá»ƒn sang form Ä‘Äƒng nháº­p
      });

      // === Xá»­ lÃ½ ÄÄƒng nháº­p ===
      loginForm.addEventListener("submit", (e) => {
        e.preventDefault();
        const username = document.getElementById("username").value.trim();
        const password = document.getElementById("password").value.trim();
        const storedPassword = localStorage.getItem(username);

        if (storedPassword && storedPassword === password) {
          alert("ğŸ‰ ÄÄƒng nháº­p thÃ nh cÃ´ng!");
          localStorage.setItem("loggedInUser", username);
          window.location.href = "index.html"; // Trá»Ÿ vá» trang chá»§
        } else {
          alert("âŒ Sai tÃ i khoáº£n hoáº·c máº­t kháº©u!");
        }
      });
    </script>
  </body>
</html>
